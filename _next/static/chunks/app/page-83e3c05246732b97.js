(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{4445:function(e,s,t){Promise.resolve().then(t.bind(t,2540))},2540:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return z}});var n=t(7437),a=t(2265),r=t(7818),l=t(6648),i=e=>{let{children:s}=e;return(0,n.jsx)("div",{className:"authWrapper",children:(0,n.jsxs)("div",{className:"bg-glass-dark backdrop-blur-md bg-opacity-50 authInnerWrapper",children:[(0,n.jsx)("div",{className:" flex items-center justify-center mb-2",children:(0,n.jsx)(l.default,{src:"/svg/logo.svg",alt:"",width:50,height:50})}),s]})})},o=e=>{let{children:s,type:t,onClick:a}=e;return(0,n.jsx)("button",{onClick:a,type:t,className:"w-full bg-indigo-500 text-white py-2 rounded hover:bg-indigo-600 transition duration-200 mb-2",children:s})},d=e=>{let{setIsNewUser:s,handleSignUp:t}=e,[r,l]=(0,a.useState)(""),[i,d]=(0,a.useState)(""),[c,u]=(0,a.useState)(""),[x,h]=(0,a.useState)(""),m=async e=>{if(e.preventDefault(),c!==x){alert("Passwords do not match!");return}try{await t(r,i,c)}catch(e){console.error("Sign up error",e)}};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h2",{className:"text-2xl font-bold mb-6 text-center text-gray-200",children:"Sign Up"}),(0,n.jsxs)("form",{onSubmit:m,children:[(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsx)("label",{htmlFor:"name",className:"block text-pink-500 mb-2",children:"Name"}),(0,n.jsx)("input",{type:"text",id:"name",className:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-indigo-500",value:r,onChange:e=>l(e.target.value),required:!0})]}),(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsx)("label",{htmlFor:"email",className:"block text-pink-500 mb-2",children:"Email"}),(0,n.jsx)("input",{type:"email",id:"email",className:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-indigo-500",value:i,onChange:e=>d(e.target.value),required:!0})]}),(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsx)("label",{htmlFor:"password",className:"block text-pink-500 mb-2",children:"Password"}),(0,n.jsx)("input",{type:"password",id:"password",className:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-indigo-500",value:c,onChange:e=>u(e.target.value),required:!0})]}),(0,n.jsxs)("div",{className:"mb-6",children:[(0,n.jsx)("label",{htmlFor:"confirmPassword",className:"block text-pink-500 mb-2",children:"Confirm Password"}),(0,n.jsx)("input",{type:"password",id:"confirmPassword",className:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-indigo-500",value:x,onChange:e=>h(e.target.value),required:!0})]}),(0,n.jsx)(o,{type:"submit",children:"Sign Up"})]}),(0,n.jsx)("a",{className:"text-center mt-2 small underline text-blue-500 cursor-pointer",onClick:()=>{s(!1)},children:"Already have an account? Log In"})]})},c=e=>{let{setIsNewUser:s,handleLogin:t}=e,[r,l]=(0,a.useState)(""),[i,d]=(0,a.useState)("");return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h2",{className:"text-2xl font-bold mb-6 text-center text-gray-200",children:"Log In"}),(0,n.jsxs)("form",{onSubmit:e=>{e.preventDefault(),t(r,i)},children:[(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsx)("label",{htmlFor:"email",className:"block text-pink-500 mb-2",children:"Email"}),(0,n.jsx)("input",{type:"email",id:"email",className:"  w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-indigo-500",value:r,onChange:e=>l(e.target.value),required:!0,style:{color:"black"}})]}),(0,n.jsxs)("div",{className:"mb-6",children:[(0,n.jsx)("label",{htmlFor:"password",className:"block text-pink-500 mb-2",children:"Password"}),(0,n.jsx)("input",{type:"password",id:"password",className:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-indigo-500",value:i,onChange:e=>d(e.target.value),required:!0,style:{color:"black"}})]}),(0,n.jsx)(o,{type:"submit",children:"Login"})]}),(0,n.jsx)("a",{className:"text-center mt-2 small underline text-blue-500 cursor-pointer",onClick:()=>{s(!0)},children:"Don`t have an account? Sign Up"})]})};let u=t(8472).Z.create({baseURL:"https://x8ki-letl-twmt.n7.xano.io/api:SSOLzzIz",headers:{"Content-Type":"application/json"}});u.interceptors.request.use(e=>{let s=localStorage.getItem("token");return s&&(e.headers.Authorization="Bearer ".concat(s)),e},e=>Promise.reject(e));let x=async(e,s)=>{let t=await u.post("/auth/login",{email:e,password:s}),{authToken:n}=t.data;return localStorage.setItem("token",n),t.data},h=async(e,s,t)=>{let n=await u.post("/auth/signup",{name:e,email:s,password:t}),{authToken:a}=n.data;return localStorage.setItem("token",a),n.data},m=async()=>{try{let e=await u.get("/auth/me");return{user:e.data,id:e.data.id}}catch(e){if(e.response&&401===e.response.status)return{user:null,id:null};throw e}},g=async(e,s)=>{let t={id:e,user_id:s.id,label:"string",created_at:new Date().toISOString()};await u.post("/conversation",t)},p=async()=>(await u.get("/conversation")).data,f=async e=>{await u.delete("/conversation/".concat(e))};var j=()=>(0,n.jsx)("div",{id:"preloader",className:"preloader",children:(0,n.jsx)("div",{className:"spinner"})}),b=e=>{let{onBurgerMenuClick:s,isOpen:t}=e;return(0,n.jsxs)("div",{className:"flex justify-between w-full h-16 p-5 items-center border-b border-gray-700 bg-blue-500 rounded flex-row",children:[(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)(l.default,{src:"/img/avatar.png",alt:"",width:50,height:50}),(0,n.jsx)("h4",{className:"font-bold text-lg",children:"Chatbot"})]}),(0,n.jsx)("div",{className:"burgerMenu cursor-pointer",onClick:s,children:t?(0,n.jsxs)("svg",{className:"h-8 w-8 text-gray-200",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round",children:[(0,n.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z"})," ",(0,n.jsx)("line",{x1:"18",y1:"6",x2:"6",y2:"18"})," ",(0,n.jsx)("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}):(0,n.jsx)("svg",{className:"h-8 w-8 text-gray-200",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})})})]})},w=e=>{let{onSendMessage:s}=e,[t,r]=(0,a.useState)(""),l=()=>{t.trim()&&(s(t),r(""))};return(0,n.jsxs)("div",{className:"flex items-center justify-between pt-2",children:[(0,n.jsx)("input",{type:"text",value:t,onChange:e=>r(e.target.value),onKeyPress:e=>{"Enter"===e.key&&l()},placeholder:"Reply to Chatbot...",className:"text-gray-800 flex-grow rounded-lg p-3 border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent"}),(0,n.jsx)("button",{onClick:l,className:"ml-3 bg-blue-500 text-white py-3 px-4 rounded-lg hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:ring-opacity-75",children:"Send!"})]})},v=t(6800),y=t.n(v),N=e=>{let{message:s,sender:t,timestamp:a,isSent:r}=e;return(0,n.jsx)("div",{className:y()("flex h-fit",{"justify-end":r,"justify-start":!r}),children:(0,n.jsxs)("div",{className:y()("max-w-xs md:max-w-md lg:max-w-lg p-3 m-2 rounded-lg",{"bg-blue-500 text-white":r,"bg-gray-200 text-gray-900":!r}),children:[(0,n.jsxs)("div",{className:"text-sm mb-1",children:[(0,n.jsx)("span",{className:"font-semibold",children:t}),(0,n.jsx)("span",{className:"text-gray-500 ml-2 text-xs",children:a})]}),(0,n.jsx)("div",{className:"break-words",children:s})]})})},k=e=>{let{children:s}=e,t=(0,a.useRef)(null),r=()=>{t.current&&t.current.scrollIntoView({behavior:"smooth"})};return(0,a.useEffect)(()=>{r();let e=()=>{r()};return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[s]),(0,n.jsxs)("div",{className:"flex flex-grow h-full overflow-y-auto flex-col",children:[s,(0,n.jsx)("div",{ref:t})]})},S=()=>(0,n.jsx)("div",{className:"flex h-fit justify-start",children:(0,n.jsx)("div",{className:y()("max-w-xs md:max-w-md lg:max-w-lg p-3 m-2 rounded-lg bg-gray-300 text-gray-900"),children:(0,n.jsx)("div",{className:"flex items-center",children:(0,n.jsxs)("div",{className:"animate-pulse flex space-x-1",children:[(0,n.jsx)("div",{className:"w-2 h-2 bg-gray-500 rounded-full"}),(0,n.jsx)("div",{className:"w-2 h-2 bg-gray-500 rounded-full"}),(0,n.jsx)("div",{className:"w-2 h-2 bg-gray-500 rounded-full"})]})})})}),C=e=>{let{onBurgerMenuClick:s,isOpen:t}=e,[r,l]=(0,a.useState)([]),[i,o]=(0,a.useState)(!1),d=()=>{let e=new Date,s=e.getHours().toString().padStart(2,"0"),t=e.getMinutes().toString().padStart(2,"0");return"".concat(s,":").concat(t)};return(0,n.jsxs)("div",{className:"flex flex-grow flex-col justify-between w-4/6 h-full rounded relative",children:[(0,n.jsx)(b,{onBurgerMenuClick:s,isOpen:t}),(0,n.jsxs)(k,{isTyping:i,children:[r.map(e=>(0,n.jsx)(N,{message:e.text,sender:e.sender,timestamp:e.timestamp,isSent:e.isSent},e.id)),i&&(0,n.jsx)(S,{})]}),(0,n.jsx)(w,{onSendMessage:e=>{let s={id:r.length,text:e,sender:"Me",timestamp:d(),isSent:!0,isChatbot:!1};l([...r,s]),o(!0),setTimeout(()=>{o(!1);let e={id:r.length+1,text:"This is a chatbot response.",sender:"Chatbot",timestamp:d(),isSent:!1,isChatbot:!0};l([...r,s,e])},2e3)}})]})},L=e=>{let{onAddConversation:s}=e,[t,r]=(0,a.useState)({id:null,name:null});(0,a.useEffect)(()=>{(async()=>{let{user:e,id:s}=await m();e&&r({id:s,name:e.name})})()},[]);let l=async()=>{if(t.id&&t.name){let e=t.id,n={id:t.id,name:t.name};await g(e,n),s()}};return(0,n.jsxs)("div",{className:"flex justify-between w-full h-16 p-5 border-b border-gray-700 items-center bg-blue-500 rounded sidebarHeader",children:[(0,n.jsx)("h4",{className:"font-bold text-lg",children:"Conversations"}),(0,n.jsx)("div",{className:"flex items-center",children:(0,n.jsx)("div",{className:"cursor-pointer",onClick:l,children:(0,n.jsxs)("svg",{className:"h-8 w-8 text-gray-200",width:"24",height:"24",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,n.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z"}),(0,n.jsx)("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),(0,n.jsx)("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})})})]})},M=e=>{let{title:s,isActive:t,onClick:a,onDelete:r}=e;return(0,n.jsxs)("div",{className:"cursor-pointer flex justify-between w-full px-5 py-4 items-center border border-gray-700 rounded ".concat(t?"bg-indigo-600":""),onClick:a,children:[(0,n.jsx)("h4",{children:s}),(0,n.jsx)("div",{onClick:e=>{e.stopPropagation(),r()},children:(0,n.jsxs)("svg",{className:"h-8 w-8 text-gray-200",width:"24",height:"24",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,n.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z"}),(0,n.jsx)("line",{x1:"4",y1:"7",x2:"20",y2:"7"}),(0,n.jsx)("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),(0,n.jsx)("line",{x1:"14",y1:"11",x2:"14",y2:"17"}),(0,n.jsx)("path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12"}),(0,n.jsx)("path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3"})]})})]})},I=e=>{let{isOpen:s}=e,[t,r]=(0,a.useState)([]),[l,i]=(0,a.useState)(null);(0,a.useEffect)(()=>{(async()=>{r((await p()).map((e,s)=>({id:e.id,title:"".concat(s+1)})))})()},[]);let o=async()=>{r((await p()).map((e,s)=>({id:e.id,title:"".concat(s+1)})))},d=e=>{i(e)},c=async e=>{await f(String(e)),r(s=>s.filter(s=>s.id!==e))};return(0,n.jsxs)("div",{className:"sidebarWrapper flex flex-grow w-2/6 min-h-full gap-4 flex-col rounded ".concat(s?"block":"hidden"),children:[(0,n.jsx)(L,{onAddConversation:o}),(0,n.jsx)("div",{className:"flex bg-gray-800 h-full flex-col gap-2 overflow-y-auto p-2 rounded",children:t.map(e=>(0,n.jsx)(M,{title:"Conversation ".concat(e.title),isActive:l===e.id,onClick:()=>d(e.id),onDelete:()=>c(e.id)},e.id))})]})},E=e=>{let{handleLogout:s}=e,[t,r]=(0,a.useState)(!0);return(0,n.jsxs)("main",{className:"chatWrapper flex h-screen flex-col items-center justify-between ",children:[(0,n.jsxs)("div",{className:"flex justify-between w-full h-16 px-5 py-4 items-center border-b border-gray-700",children:[(0,n.jsx)(l.default,{src:"/svg/logo.svg",alt:"",width:50,height:50}),(0,n.jsx)("div",{className:"w-28",children:(0,n.jsx)(o,{onClick:s,children:"Logout"})})]}),(0,n.jsxs)("div",{className:"flex flex-grow gap-5 justify-evenly w-full h-full p-5 overflow-hidden chatInnerWrapper",children:[t&&(0,n.jsx)(I,{isOpen:t}),(0,n.jsx)(C,{onBurgerMenuClick:()=>{r(!t)},isOpen:t})]})]})};let P=(0,r.default)(()=>Promise.all([t.e(210),t.e(351)]).then(t.bind(t,9721)),{loadableGenerated:{webpack:()=>[9721]},ssr:!1});function z(){let[e,s]=(0,a.useState)(!1),[t,r]=(0,a.useState)(null),[l,o]=(0,a.useState)(!0),u=async(e,s)=>{await x(e,s),r(await m())},g=async(e,t,n)=>{await h(e,t,n),s(!1)};return((0,a.useEffect)(()=>{(async function(){r(await m()),o(!1)})()},[]),l)?(0,n.jsx)(j,{}):t?(0,n.jsx)(E,{handleLogout:()=>{r(null),localStorage.removeItem("token")}}):(0,n.jsxs)("main",{className:"flex min-h-screen flex-col items-center justify-between",children:[(0,n.jsx)("div",{className:"sceneWrapper",children:(0,n.jsx)(P,{})}),(0,n.jsx)(i,{children:e?(0,n.jsx)(d,{setIsNewUser:s,handleSignUp:g}):(0,n.jsx)(c,{setIsNewUser:s,handleLogin:u})})]})}}},function(e){e.O(0,[670,971,23,744],function(){return e(e.s=4445)}),_N_E=e.O()}]);